# 3. Assembly Language Fundamentals 요약 및 정리

## 어셈블리 언어 프로그래밍

어셈블리 언어 프로그래밍의 핵심 목표 및 역할은 다음과 같다.

* **Total Information (전체 정보):** CPU **레지스터** 및 **플래그**에 대한 접근을 포함한다.
* **Assembly Language (어셈블리 언어):** 상세한 제어를 위한 핵심 언어이다.
* **Simple Program (간단한 프로그램):** 두 숫자를 더하는 예제와 같은 프로그램을 만든다.
* **Responsibility (책임/역할):** 데이터 및 명령어 형식을 직접 관리한다.

---

## 기본 언어 요소 및 프로그램 종료

| 코드 / 개념 | 한국어 설명 |
| :--- | :--- |
| `move eax, 5` | **EAX** 레지스터에 값 **5**를 이동(저장)시키는 명령어이다. |
| `add eax, 6` | EAX 레지스터의 값에 **6**을 **더하고**, 그 결과(11)를 다시 **EAX** 레지스터에 저장한다. |
| `INVOKE ExitProcess, 0` | 프로그램을 종료하고 운영체제에 제어권을 반환한다. |
| **라인 코멘트** (`;`) | **세미콜론(`;`)**으로 시작하며, 해당 줄의 주석 처리에 사용한다. |
| **운영 체제 중 셸(Shell) 역할** | 운영 체제가 디스크의 파일을 주기억장치(메모리)에 옮기고 실행시킨다 (프로그램 로딩). |
| `PROC`에서 `0`의 의미 | 프로그램 종료 코드에서 `0`은 **성공적인 종료**를 의미한다. |

---

## 데이터 영역 및 변수

* `.data`: 변수를 정의하고 초기화하는 **데이터 세그먼트(Data segment)**의 시작을 나타내는 **지시어(Directive)**이다.
* `sum`: 주기억장치(메모리)의 일부분을 참조하기 위해 정의한 **변수** 이름이다.

---

## 정수 리터럴 (Integer Literals)

| 진수 접미사 (Radix) | 의미 (Meaning) |
| :--- | :--- |
| **h** | **16진수** (hexadecimal)를 나타낸다. |
| **q / o** | **8진수** (octal)를 나타낸다. |
| **d** | **10진수** (decimal)를 나타낸다. |
| **b / Y** | **2진수** (binary)를 나타낸다. |
| **r** | 인코딩된 실수를 나타낸다. |
| **t** | 10진수 (alternate)를 나타낸다. |

---

## 상수 정수 표현식의 산술 연산자

상수 정수 표현식에 사용되는 산술 연산자의 우선순위는 다음과 같다.

| 우선순위 (Precedence Level) | 연산자 (Operator) | 이름 (Name) |
| :---: | :--- | :--- |
| **1** | `()` | 괄호 (Parentheses) |
| **2** | `+, -` (단항) | 단항 더하기, 빼기 (Unary plus, minus) |
| **3** | `*, /` | 곱하기, 나누기 (Multiply, divide) |
| **3** | `MOD` | 나머지 (Modulus) |
| **4** | `+, -` (이항) | 더하기, 빼기 (Add, subtract) |

---

## 연산자 우선순위 예시

* **개념:** `16 / 5`와 같은 연산 시, **16과 5**는 CPU의 **레지스터**로 가져와져서 연산이 수행된다.

| 표현식 (Expression) | 값 (Value) |
| :--- | :--- |
| `16 / 5` | `3` |
| `-(3 + 4) * (6 - 1)` | `-35` |
| `-3 + 4 * 6 - 1` | `20` |
| `25 mod 3` | `1` |

---

## 실수 리터럴 (Real Number Literals)

IEEE 32비트 부동 소수점 형식에서 **S, E, M**은 다음과 같다.

* **S (Sign Bit):** **부호** 비트 (0: 양수, 1: 음수)를 나타낸다.
* **E (Exponent):** **지수**부 (숫자의 크기를 나타냄)를 나타낸다.
* **M (Mantissa / Significand):** **가수**부 또는 유효숫자 (숫자의 정밀도를 나타냄)를 나타낸다.

---

## 문자 및 문자열 리터럴

* **Character Literals (문자 리터럴):** **홑따옴표나 쌍따옴표**로 묶인 **단일 문자**이다.
* **String Literals (문자열 리터럴):** **하나 이상의 문자 순서열**을 홑따옴표나 쌍따옴표로 묶은 것이다.
* **Null String (널 문자열):** 모든 문자열 뒤에는 문자열의 끝을 나타내는 **널 바이트(null byte, 값 0)**가 존재한다.

---

## 예약어 및 지시어 (Reserved Words and Directives)

| 구분 | 설명 |
| :--- | :--- |
| **예약어** (Reserved Words) | 명령어 니모닉(**MOV, ADD, MUL**), 레지스터 이름, 지시어, 속성, 사전 정의된 기호(**@data**) 등 어셈블러에 의해 특별한 용도로 사용되는 단어이다. |
| **지시어** (Directives) | 어셈블러(번역기)에게 프로그램을 어셈블하는 방법을 지시하는 **지시문**이다. |
| **@** 기호 | **`@data`**와 같이 어셈블러가 미리 정의한 심볼에 사용되므로, 프로그래머는 다른 용도로 사용하지 않도록 권장한다. |

---

## 식별자 및 세그먼트

| 구분 | 설명 |
| :--- | :--- |
| **식별자** (Identifiers) | 변수, 레이블 등의 이름으로, 1~247자이며 **대소문자를 구분하지 않는다**. 첫 문자는 문자, 밑줄(`_`), `@`, `?`, `$` 중 하나여야 한다. |
| **Directives** | 소스 코드에 삽입되어 어셈블러에게 명령을 내리는 구문이다. |
| **Defining Segments** | **Stack** (함수 호출에 필요한 메모리), **.code**, **.data**와 같이 프로그램에 필요한 메모리 영역을 정의한다. |

---

## 명령어 (Instructions)

* **Instructions란?** 어셈블러에 의해 **기계어 바이트**로 번역되어 CPU가 실행할 수 있는 명령이다.
* **명령의 구성:** `[label:] mnemonic [operands] [;comment]` 형태로 구성되며, 명령은 **오퍼랜드(피연산자)**가 있을 수도 있고 없을 수도 있다.

---

## 레이블 (Label)

* **데이타 레이블:** 변수 정의의 메모리 주소를 나타낸다.
* **코드 레이블:** 명령어의 주소를 나타내며, **점프(jump)**나 호출 명령의 **목표 지점**으로 사용한다.

---

## 명령어 니모닉 표 정리

| 니모닉 (Mnemonic) | 설명 (Description) |
| :--- | :--- |
| **MOV** | 하나의 값을 다른 값에 이동(할당)한다. |
| **ADD** | 두 값을 더한다. |
| **SUB** | 하나의 값을 다른 값에서 뺀다. |
| **MUL** | 두 값을 곱한다. |
| **JMP** | 새로운 위치로 점프한다. |
| **CALL** | 프로시저(함수)를 호출한다. |

---

## 피연산자 (Operands)

* **Operand:** 명령어의 대상이 되는 것을 **오퍼랜드**라고 부른다. (`add eax, 6`에서 `eax`와 `6`이 오퍼랜드)
* **Destination/Source:** 두 개의 오퍼랜드가 있는 경우, 첫 번째 오퍼랜드는 결과를 저장하는 **Destination (대상)**, 두 번째 오퍼랜드는 연산에 사용되는 **Source (소스)**이다.

---

## 주석 (Comments)

주석은 프로그램의 목적, 작성자, 구현 정보 등을 설명하는 데 사용된다.

| 주석 유형 (Comment Type) | 특징 (Characteristics) |
| :--- | :--- |
| **한 줄 주석** | **세미콜론(`;`)** 문자로 시작한다. |
| **블록 주석** | **`COMMENT` 지시어**와 사용자가 지정한 기호로 시작하여, 동일한 기호가 다시 나타날 때까지 주석 처리된다. |

---

## NOP 명령어 (NOP Instruction)

* **NOP (No Operation) Instruction:** **아무런 작업도 수행하지 않는** 명령어이다.
* **1바이트**의 프로그램 저장 공간을 차지한다.
* **사용 목적:** 컴파일러와 어셈블러가 코드를 **효율적인 주소 경계에 맞추기 위해(align code)** 사용한다.

---

## 데이터 정의 (Defining Data)

데이터 정의 구문은 메모리에 변수 저장을 위한 공간을 할당하며, 어셈블러는 크기와 유형에 따라 데이터를 인식한다.

---

## 데이터 정의 지시어 표 정리

| 지시어 (Directive) | 크기 (Size) | 설명 (Description) |
| :--- | :--- | :--- |
| **BYTE, SBYTE** | 8-bit (1 Byte) | 부호 없는/있는 바이트 정수 할당. |
| **WORD, SWORD** | 16-bit (2 Bytes) | 부호 없는/있는 16비트 정수 할당. |
| **DWORD, SDWORD** | 32-bit (4 Bytes) | 부호 없는/있는 32비트 정수 할당. |
| **REAL4** | 32-bit (4 Bytes) | 단정밀도 부동 소수점 변수 할당. |
| **REAL8** | 64-bit (8 Bytes) | 배정밀도 부동 소수점 변수 할당. |
| **REAL10** | 80-bit (10 Bytes) | 확장 정밀도 부동 소수점 변수 할당. |

---

## 데이터 초기화

* `Value1 BYTE 'A'`: `Value1`에 **1바이트**를 지정하고 초기 값으로 문자 **`A`의 ASCII 코드** 값을 넣는다.

---

## 다중 초기화 (Multiple Initializers) 설명

하나의 데이터 정의에 여러 초기화 값이 사용되더라도, 해당 **레이블(변수 이름)**은 **첫 번째 초기화 값의 오프셋(시작 주소)**만을 참조한다.

---

## 문자열 정의 (Defining Strings)

문자열은 **홑따옴표나 쌍따옴표**로 묶어 정의하며, 일반적인 유형은 **널 바이트(0)**로 끝나는 **널 종료 문자열**이다.

---

## DUP 연산자 (DUP Operator) 설명

* **DUP 연산자:** 지정된 횟수만큼 데이터 항목에 대한 저장 공간을 할당한다.
* `BYTE 20 DUP (0)`: **20바이트**의 저장 공간을 할당하고, 각 바이트를 **0**으로 채우라는 명령어이다.

---

## 16비트 정수 정의

`WORD` (부호 없는)와 `SWORD` (부호 있는) 지시어는 하나 이상의 **16비트 정수**를 위한 저장 공간을 할당한다.

---

## 팩 형식 BCD 데이터 정의 (Defining Packed BCD Data)

* **설명:** 팩 형식 BCD(Binary Coded Decimal) 정수를 정의한다.
* **부호 표현:**
    * `+1234`는 맨 뒤가 **`00`**으로 끝난다 (양수).
    * `-1234`는 맨 뒤가 **`80`**으로 끝난다 (음수).

---

## 고 정밀도 표현방식

`REAL4`, `REAL8`, `REAL10` 지시어를 사용하여 각각 단정밀도, 배정밀도, 확장 정밀도 부동 소수점 변수를 정의한다.

---

## 리틀 엔디안 순서 (Little-Endian order) 설명

* **설명:** x86 프로세서는 데이터를 저장할 때 **가장 낮은 바이트(Low-order byte)**를 메모리의 **가장 낮은 주소(Low address)**에 저장하는 **리틀 엔디안 순서**를 사용한다.
* **`1234h`가 `34 12`로 저장되는 이유:** 낮은 바이트인 `34h`가 낮은 주소에 먼저 저장되고, 높은 바이트인 `12h`가 그 다음에 저장되기 때문이다.

---

## 초기화되지 않은 데이터 정의

* **`.DATA?` 지시어:** **초기화되지 않은 데이터**를 선언한다. 이 지시어를 사용하면 큰 블록의 데이터를 정의할 때 컴파일된 **프로그램 파일의 크기를 줄일 수 있다.**

---

## 코드 블록 내 데이터 정의

코드 중간에 `.data` 지시어를 사용하여 변수를 선언할 수 있다. 이는 특정 영역에서만 사용되는 **지역화된 변수**를 정의하는 데 유용하다.

---

## 등호 지시어 (Equal-Sign Directive)

* **Equal-Sign Directive (`=`):** 심볼 이름과 **정수 표현식**을 연결하여 심볼을 정수 값으로 대체하는 **상수 정의**에 사용한다.

---

## 배열 및 문자열 크기 계산

* **`ListSize = ($ - list)` 설명:**
    * `list`: 배열의 **시작 주소** 레이블이다.
    * `$`: 어셈블러의 **현재 위치 카운터**를 나타내는 특수 기호이다 (배열의 끝 다음 주소).
    * **결과:** 현재 위치 주소(`$`)에서 배열의 시작 주소(`list`)를 뺀 값은 `list` 배열이 차지하는 **총 바이트 수(크기)**가 되어 `ListSize`에 할당된다.

---

## EQU 지시어 (EQU Dirctive)

* **EQU 지시어 (Equate):** 심볼릭 이름(symbolic name)을 **정수 표현식** 또는 **임의의 텍스트**와 연결한다. `=` 지시어와 달리 **텍스트**도 정의할 수 있다.
